/*
 * TableHeadFixer
 * https://github.com/90arther/jquery.tableheadfixer
 *
 * Copyright (c) 2015 90arther@gmail.com OR caiweiguo@youmi.net
 * Licensed under the MIT license.
 */


;
(function($) {

    'use strict';

    $.fn.extend({

        tableHeadFixer: function(options) {

            var offset = this.offset(),
                th = this.find('th'),
                delayTimer = null,
                defaults = {
                    'bgColor': '#eee',
                    'z-index': '1'
                };

            options = $.extend({}, defaults, options);



            if (th.length === 0) {

                if (!!window.console) {
                    //console.log('请按照规范写html结构');
                }

            } else {


                $(window).on('scroll', function() {

                    fixHead();
                    // setFixHeadTimer(0);
                });

            }


            function setFixHeadTimer(direction) {

                if (!delayTimer) {
                    delayTimer = setTimeout(function() {
                        fixHead();
                        delayTimer = null;
                    }, direction);
                }

            }


            function fixHead() {

                var top = Math.max(document.body.scrollTop, document.documentElement.scrollTop),
                    left = Math.max(document.body.scrollLeft, document.documentElement.scrollLeft),
                    topValue = (top > offset.top) ? (top - offset.top - 1) : 0;


                th.css({
                    'position': 'relative',
                    'top': '0px',
                    'border-color': '#ddd',
                    'border-weight': '1px',
                    'border-style': 'solid',
                    'transform': 'translate(0, ' + topValue + 'px)',
                    'background-color': options.bgColor,
                    'z-index': options['z-index']
                });
            }


        }

    });

})(jQuery);